<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEP 2020 Timetable Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">
                    <span class="logo-icon">üìÖ</span>
                    NEP 2020 Timetable Generator
                </h1>
                <p class="subtitle">AI-Powered Scheduling for Higher Education Institutions</p>
            </div>
        </div>
    </header>

    <div class="container main-container">
        <div class="tabs">
            <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="tab-btn" data-tab="courses">Courses</button>
            <button class="tab-btn" data-tab="faculty">Faculty</button>
            <button class="tab-btn" data-tab="rooms">Rooms</button>
            <button class="tab-btn" data-tab="students">Students</button>
            <button class="tab-btn" data-tab="generate">Generate Timetable</button>
            <button class="tab-btn" data-tab="view">View Timetables</button>
        </div>

        <div class="tab-content">
        
            <div id="dashboard" class="tab-pane active">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-info">
                            <h3 id="total-courses">0</h3>
                            <p>Total Courses</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë®‚Äçüè´</div>
                        <div class="stat-info">
                            <h3 id="total-faculty">0</h3>
                            <p>Faculty Members</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèõÔ∏è</div>
                        <div class="stat-info">
                            <h3 id="total-rooms">0</h3>
                            <p>Rooms/Labs</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <h3 id="total-students">0</h3>
                            <p>Students</p>
                        </div>
                    </div>
                </div>

                <div class="welcome-section">
                    <h2>Welcome to NEP 2020 Timetable Generator</h2>
                    <p>This intelligent system helps you create optimized, conflict-free timetables for your institution following NEP 2020 guidelines.</p>
                    
                    <div class="features">
                        <h3>Key Features:</h3>
                        <ul>
                            <li>‚úÖ AI-powered scheduling with Constraint Satisfaction Problem (CSP) solver</li>
                            <li>‚úÖ Support for flexible credit-based multidisciplinary programs</li>
                            <li>‚úÖ Handles B.Ed., M.Ed., FYUP, and ITEP programs</li>
                            <li>‚úÖ Automatic conflict detection and resolution</li>
                            <li>‚úÖ Faculty workload optimization</li>
                            <li>‚úÖ Export to PDF and Excel formats</li>
                            <li>‚úÖ Real-time validation and error checking</li>
                        </ul>
                    </div>

                    <div class="quick-start">
                        <h3>Quick Start Guide:</h3>
                        <ol>
                            <li>Add your <strong>Courses</strong> with course codes, credits, and types</li>
                            <li>Register <strong>Faculty</strong> members with their expertise and availability</li>
                            <li>Configure <strong>Rooms</strong> and labs with capacity and type</li>
                            <li>Import or add <strong>Student</strong> enrollment data</li>
                            <li>Go to <strong>Generate Timetable</strong> and click the generate button</li>
                            <li>View and export your optimized timetable</li>
                        </ol>
                    </div>
                </div>
            </div>

            <div id="courses" class="tab-pane">
                <div class="section-header">
                    <h2>Course Management</h2>
                    <button class="btn btn-primary" onclick="showAddCourseForm()">+ Add Course</button>
                </div>

                <div id="add-course-form" class="form-container" style="display: none;">
                    <h3>Add New Course</h3>
                    <form id="course-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Course Code *</label>
                                <input type="text" name="code" required placeholder="e.g., EDU101">
                            </div>
                            <div class="form-group">
                                <label>Course Name *</label>
                                <input type="text" name="name" required placeholder="e.g., Educational Psychology">
                            </div>
                            <div class="form-group">
                                <label>Credits *</label>
                                <input type="number" name="credits" required min="1" max="6" value="3">
                            </div>
                            <div class="form-group">
                                <label>Type *</label>
                                <select name="type" required>
                                    <option value="theory">Theory</option>
                                    <option value="practical">Practical</option>
                                    <option value="lab">Lab</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Program *</label>
                                <select name="program" required>
                                    <option value="B.Ed.">B.Ed.</option>
                                    <option value="M.Ed.">M.Ed.</option>
                                    <option value="FYUP">FYUP</option>
                                    <option value="ITEP">ITEP</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Faculty</label>
                                <select name="faculty_id" id="course-faculty-select">
                                    <option value="">Select Faculty</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Course</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddCourseForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="data-table-container">
                    <table class="data-table" id="courses-table">
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Name</th>
                                <th>Credits</th>
                                <th>Type</th>
                                <th>Program</th>
                                <th>Faculty</th>
                            </tr>
                        </thead>
                        <tbody id="courses-tbody">
                            <tr>
                                <td colspan="6" class="loading">Loading courses...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="faculty" class="tab-pane">
                <div class="section-header">
                    <h2>Faculty Management</h2>
                    <button class="btn btn-primary" onclick="showAddFacultyForm()">+ Add Faculty</button>
                </div>

                <div id="add-faculty-form" class="form-container" style="display: none;">
                    <h3>Add New Faculty</h3>
                    <form id="faculty-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Name *</label>
                                <input type="text" name="name" required placeholder="e.g., Dr. John Smith">
                            </div>
                            <div class="form-group">
                                <label>Email *</label>
                                <input type="email" name="email" required placeholder="e.g., john.smith@university.edu">
                            </div>
                            <div class="form-group">
                                <label>Department</label>
                                <input type="text" name="department" placeholder="e.g., Education">
                            </div>
                            <div class="form-group">
                                <label>Expertise</label>
                                <input type="text" name="expertise" placeholder="e.g., Educational Psychology, Pedagogy">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Faculty</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddFacultyForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="data-table-container">
                    <table class="data-table" id="faculty-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Department</th>
                                <th>Expertise</th>
                            </tr>
                        </thead>
                        <tbody id="faculty-tbody">
                            <tr>
                                <td colspan="4" class="loading">Loading faculty...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="rooms" class="tab-pane">
                <div class="section-header">
                    <h2>Room Management</h2>
                    <button class="btn btn-primary" onclick="showAddRoomForm()">+ Add Room</button>
                </div>

                <div id="add-room-form" class="form-container" style="display: none;">
                    <h3>Add New Room</h3>
                    <form id="room-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Room Number *</label>
                                <input type="text" name="number" required placeholder="e.g., 101, Lab-A">
                            </div>
                            <div class="form-group">
                                <label>Type *</label>
                                <select name="type" required>
                                    <option value="classroom">Classroom</option>
                                    <option value="lab">Laboratory</option>
                                    <option value="auditorium">Auditorium</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Capacity *</label>
                                <input type="number" name="capacity" required min="10" max="500" value="40">
                            </div>
                            <div class="form-group">
                                <label>Building</label>
                                <input type="text" name="building" placeholder="e.g., Main Building">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Room</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddRoomForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="data-table-container">
                    <table class="data-table" id="rooms-table">
                        <thead>
                            <tr>
                                <th>Room Number</th>
                                <th>Type</th>
                                <th>Capacity</th>
                                <th>Building</th>
                            </tr>
                        </thead>
                        <tbody id="rooms-tbody">
                            <tr>
                                <td colspan="4" class="loading">Loading rooms...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="students" class="tab-pane">
                <div class="section-header">
                    <h2>Student Management</h2>
                    <button class="btn btn-primary" onclick="showAddStudentForm()">+ Add Student</button>
                </div>

                <div id="add-student-form" class="form-container" style="display: none;">
                    <h3>Add New Student</h3>
                    <form id="student-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Student ID *</label>
                                <input type="text" name="student_id" required placeholder="e.g., 2024001">
                            </div>
                            <div class="form-group">
                                <label>Name *</label>
                                <input type="text" name="name" required placeholder="e.g., Jane Doe">
                            </div>
                            <div class="form-group">
                                <label>Program *</label>
                                <select name="program" required>
                                    <option value="B.Ed.">B.Ed.</option>
                                    <option value="M.Ed.">M.Ed.</option>
                                    <option value="FYUP">FYUP</option>
                                    <option value="ITEP">ITEP</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Semester</label>
                                <input type="number" name="semester" min="1" max="8" value="1">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Student</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddStudentForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="data-table-container">
                    <table class="data-table" id="students-table">
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Program</th>
                                <th>Semester</th>
                            </tr>
                        </thead>
                        <tbody id="students-tbody">
                            <tr>
                                <td colspan="4" class="loading">Loading students...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="generate" class="tab-pane">
                <div class="generate-section">
                    <h2>Generate Timetable</h2>
                    <p>Configure parameters and generate an optimized timetable using AI algorithms.</p>

                    <div class="generate-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Program *</label>
                                <select id="gen-program" required>
                                    <option value="B.Ed.">B.Ed.</option>
                                    <option value="M.Ed.">M.Ed.</option>
                                    <option value="FYUP">FYUP</option>
                                    <option value="ITEP">ITEP</option>
                                    <option value="General">All Programs</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Semester</label>
                                <input type="text" id="gen-semester" value="Semester 1" placeholder="e.g., Semester 1">
                            </div>
                            <!-- <div class="form-group"> -->
                                <!-- <label>Algorithm *</label> -->
                                <!-- <select id="gen-algorithm"> -->
                                    <!-- <option value="greedy">Greedy Algorithm</option> -->
                                <!-- </select> -->
                            <!-- </div> -->
                        </div>

                        <div class="validation-result" id="validation-result" style="display: none;"></div>

                        <div class="form-actions">
                            <select id="gen-algorithm"></select>
                            <button class="btn btn-secondary" onclick="validateData()">Validate Data</button>
                            <button class="btn btn-primary btn-large" onclick="generateTimetable()">
                                <span class="btn-icon">üöÄ</span>
                                Generate Timetable
                            </button>
                        </div>
                    </div>
                 
                    <div id="generation-progress" class="progress-container" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <p class="progress-text">Generating timetable... Please wait.</p>
                    </div>

                    <div id="generation-result" class="result-container" style="display: none;"></div>
                </div>
            </div>

            <div id="view" class="tab-pane">
                <div class="section-header">
                    <h2>View Timetables</h2>
                    <button class="btn btn-primary" onclick="loadTimetables()">üîÑ Refresh</button>
                </div>

                <div id="timetables-list" class="timetables-grid">
                    <p class="loading">Loading timetables...</p>
                </div>

                <div id="timetable-viewer" class="timetable-viewer" style="display: none;">
                    <div class="viewer-header">
                        <h3 id="viewer-title"></h3>
                        <div class="viewer-actions">
                            <button class="btn btn-secondary" onclick="exportTimetablePDF()">üìÑ Export PDF</button>
                            <button class="btn btn-secondary" onclick="exportTimetableExcel()">üìä Export Excel</button>
                            <button class="btn btn-secondary" onclick="closeTimetableViewer()">‚úï Close</button>
                        </div>
                    </div>
                    <div id="timetable-content" class="timetable-content"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <div id="toast" class="toast"></div>

    <script src="firebase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>